/**
 * @file Firestore Security Rules
 * @description This ruleset defines access control for a portfolio application's data.
 *
 * Core Philosophy:
 * The security model prioritizes simplicity and ease of management for a portfolio application
 * with limited collaborative features. Data is stored in root-level collections.
 * Public read access is enabled for all collections. Write access is
 * restricted to a specific admin user.
 *
 * Data Structure:
 * - /projects/{projectId}: Stores project information.
 * - /illustrations/{illustrationId}: Stores illustration information.
 * - /contactInfo/{contactInfoId}: Stores contact information.
 *
 * Key Security Decisions:
 * - Public read access: All collections are publicly readable.
 * - Restricted write access: Write operations are only allowed for the admin user.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Defines read and write access for the /projects collection.
     * @path /projects/{projectId}
     * @allow (get, list) Any user can read project information.
     * @deny (create, update, delete) No user can create, update, or delete project information.
     * @principle Allows public read access but restricts all write operations for security.
     */
    match /projects/{projectId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Defines read and write access for the /illustrations collection.
     * @path /illustrations/{illustrationId}
     * @allow (get, list) Any user can read illustration information.
     * @allow (create, update, delete) Only the admin user can manage illustrations.
     * @principle Allows public read access and restricts write operations to the admin.
     */
    match /illustrations/{illustrationId} {
      allow get, list: if true;
      allow create, update, delete: if request.auth != null && request.auth.token.email == 'franciscoparra22@gmail.com';
    }

    /**
     * @description Defines read and write access for the /contactInfo collection.
     * @path /contactInfo/{contactInfoId}
     * @allow (get, list) Any user can read contact information.
     * @deny (create, update, delete) No user can create, update, or delete contact information.
     * @principle Allows public read access but restricts all write operations for security.
     */
    match /contactInfo/{contactInfoId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}
